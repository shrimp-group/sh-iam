<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wkclz.iam.admin.mapper.IamRequestLogMapper">
      
    <select id="getRequestLogList" parameterType="com.wkclz.iam.common.entity.IamRequestLog" resultType="com.wkclz.iam.common.entity.IamRequestLog">
        SELECT
            id,
            tenant_code,
            app_code,
            user_agent,
            browser_name,
            browser_version,
            engine_name,
            engine_version,
            user_os,
            user_platform,
            character_encoding,
            accept,
            accept_language,
            accept_encoding,
            cookie,
            origin,
            referer,
            remote_addr,
            method,
            http_protocol,
            request_host,
            request_uri,
            query_string,
            request_body,
            response_body,
            http_status,
            location,
            isp,
            token,
            user_code,
            username,
            nickname,
            cost_time,
            error_msg,
            create_time,
            create_by,
            update_time,
            update_by,
            remark,
            version
        FROM
            iam_request_log
        WHERE
            deleted = 0
            <if test="tenantCode != null">AND tenant_code = #{tenantCode}</if>
            <if test="appCode != null">AND app_code = #{appCode}</if>
            <if test="username != null">AND username = #{username}</if>
            <if test="userCode != null">AND user_code = #{userCode}</if>
            <if test="requestUri != null">AND request_uri LIKE CONCAT(#{requestUri}, '%')</if>
            <if test="method != null">AND method = #{method}</if>
            <if test="httpStatus != null">AND http_status = #{httpStatus}</if>
            <if test="remoteAddr != null">AND remote_addr = #{remoteAddr}</if>
            <if test="timeFrom != null">AND create_time >= #{timeFrom}</if>
            <if test="timeTo != null">AND create_time &lt;= #{timeTo}</if>
        ORDER BY
            id DESC
    </select>

</mapper>

